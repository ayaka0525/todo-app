.container
  %h1 コメントサンプル

  - if user_signed_in?
    = link_to 'ログアウト', destroy_user_session_path, data: { turbo_method: :delete }
    = link_to "マイページへ", user_path(current_user)

    %h2
      = link_to '投稿する', new_post_path, class: 'btn btn-primary'
    %hr

    %h2 投稿一覧
    - if @posts.any?
      - @posts.each_with_index do |post, index|
        - if post.user.present?
          %p= @user_email_parts[index]  # メールの @ 前の部分を表示
        - else
          %p ユーザー情報がありません
        %p
          %a{ href: post_path(post) }= post.content
        - if post.deadline.present?
          %p 期限: = post.deadline.strftime('%Y-%m-%d %H:%M')
    - else
      %p 投稿がありません
  - else
    %p
      = link_to "ユーザー登録", new_user_registration_path
      %br/
      = link_to "ログイン", new_user_session_path
